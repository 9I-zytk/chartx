define("chartx/chart/bar/horizontal/graphs",["canvax/index","canvax/shape/Rect","canvax/animation/Tween","chartx/components/tips/tip"],function(a,b,c,d){var e=function(a,b,c,e){this.dataFrame=e,this.w=0,this.h=0,this.pos={x:0,y:0},this._colors=["#6f8cb2","#c77029","#f15f60","#ecb44f","#ae833a","#896149"],this.bar={width:12,radius:2},this.eventEnabled=!0,this.sprite=null,this.txtsSp=null,this.yDataSectionLen=0,_.deepExtend(this,a),this._tip=new d(b,c),this.init()};return e.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"}),this.txtsSp=new a.Display.Sprite({id:"txtsSp",context:{visible:!1}})},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},_getColor:function(a,b,c,d){var e=null;return _.isString(a)&&(e=a),_.isArray(a)&&(e=a[c]),_.isFunction(a)&&(e=a({iGroup:c,iNode:b,value:d})),e&&""!=e||(e=this._colors[c]),e},checkBarW:function(a){this.bar.width>=a&&(this.bar.width=a-1>1?a-1:1)},draw:function(c,d){if(_.deepExtend(this,d),0!=c.length){this.data=c;for(var e=c[0].length,f=0;e>f;f++){for(var g=new a.Display.Sprite({id:"barGroup"+f}),h=new a.Display.Sprite({id:"barGroupHover"+f}),i=0,j=c.length;j>i;i++){var k=c[i][f],l=this._getColor(this.bar.fillStyle,f,i,k.value),m=parseInt(Math.abs(k.x)),n={x:0,y:Math.round(k.y-this.bar.width/2),width:m,height:parseInt(this.bar.width),fillStyle:l};if(this.bar.radius){var o=Math.min(this.bar.width/2,m);o=Math.min(o,this.bar.radius),n.radius=[o,o,0,0]}var p=new b({id:"bar_"+i+"_"+f,context:n}),q=new b({id:"bar_"+i+"_"+f+"hover",context:{x:0,y:Math.round(k.y-this.bar.width/2),width:this.w,height:parseInt(this.bar.width),fillStyle:"black",globalAlpha:0,cursor:"pointer"}});if(q.target=p,q.row=f,q.column=i,this.eventEnabled){var r=this;q.on("mouseover",function(a){var b=this.target.context;b.y--,b.height+=2,r.sprite.addChild(r._tip.sprite),r._tip.show(r._setTipsInfoHandler(a,this.row,this.column))}),q.on("mousemove",function(a){r._tip.move(r._setTipsInfoHandler(a,this.row,this.column))}),q.on("mouseout",function(a){var b=this.target.context;b.y++,b.height-=2,r._tip.hide(a),r.sprite.removeChild(r._tip.sprite)})}var s=k.value;_.isFunction(this.text.format)&&(s=this.text.format(s));var t=new a.Display.Text(s,{context:{x:m+2,y:k.y,fillStyle:this.text.fillStyle,fontSize:this.text.fontSize,textAlign:this.text.textAlign}});t.context.x+t.getTextWidth()>this.w&&(t.context.x=m-t.getTextWidth()-2),t.context.y=k.y-t.getTextHeight()/2,this.txtsSp.addChild(t),g.addChild(p),h.addChild(q)}this.sprite.addChild(g),this.sprite.addChild(h)}this.sprite.addChild(this.txtsSp),this.sprite.context.x=this.pos.x,this.sprite.context.y=this.pos.y}},grow:function(){function a(){d=requestAnimationFrame(a),c.update()}var b=this,d=null,e=function(){new c.Tween({h:0}).to({h:b.h},500).onUpdate(function(){b.sprite.context.scaleX=this.h/b.h}).onComplete(function(){b._growEnd(),cancelAnimationFrame(d)}).start();a()};e()},_growEnd:function(){this.text.enabled&&(this.txtsSp.context.visible=!0)},_setXaxisYaxisToTipsInfo:function(a){a.tipsInfo.xAxis={field:this.dataFrame.xAxis.field,value:this.dataFrame.xAxis.org[0][a.tipsInfo.iNode]};var b=this;_.each(a.tipsInfo.nodesInfoList,function(a,c){a.field=b.dataFrame.yAxis.field[c]})},_setTipsInfoHandler:function(a,b,c){return a.tipsInfo={iGroup:c,iNode:b,nodesInfoList:this._getNodeInfo(b)},this._setXaxisYaxisToTipsInfo(a),a},_getNodeInfo:function(a){var b=[],c=this;return _.each(this.data,function(d,e){var f=_.clone(d[a]);f.fillStyle=c._getColor(c.bar.fillStyle,a,e,f.value),b.push(f)}),b}},e});