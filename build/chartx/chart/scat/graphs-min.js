define("chartx/chart/scat/graphs",["canvax/index","canvax/shape/Circle","canvax/shape/Rect","canvax/animation/Tween"],function(a,b,c,d){var e=function(a,b){this.zAxis=b,this.w=0,this.h=0,this.pos={x:0,y:0},this.circle={maxR:20,minR:3,r:null,normalR:10},this._colors=["#6f8cb2","#c77029","#f15f60","#ecb44f","#ae833a","#896149"],this.sprite=null,this._circles=[],_.deepExtend(this,a),this.init()};return e.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"})},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},getCircleFillStyle:function(a,b,c){var d=this.circle.fillStyle;return _.isArray(d)&&(d=d[b]),_.isFunction(d)&&(d=d(a,b,c)),d&&""!=d||(d=this._colors[b]),d},getR:function(a){var b=this.circle.r;return _.isFunction(b)?b(a):b},draw:function(d,e){var f=this;if(_.deepExtend(this,e),0!=d.length){f.data=d,this.induce=new c({id:"induce",context:{y:-this.h,width:this.w,height:this.h,fillStyle:"#000000",globalAlpha:0,cursor:"pointer"}}),this.sprite.addChild(this.induce),this.induce.on("panstart mouseover",function(a){a.eventInfo=null}),this.induce.on("panmove mousemove",function(a){a.eventInfo=null});var g=d[0].length,h=1;this.zAxis.field&&this.zAxis.field.length>0&&(h=_.max(_.flatten(this.zAxis.org)));for(var i=0;g>i;i++){for(var j=new a.Display.Sprite({id:"barGroup"+i}),k=0,l=d.length;l>k;k++){var m=d[k][i],n=this.zAxis.org[k]&&this.zAxis.org[k][i],o=this.getR(m)||(n?Math.max(this.circle.maxR*(n/h),this.circle.minR):this.circle.normalR),p=new b({hoverClone:!1,context:{x:m.x,y:m.y,fillStyle:this.getCircleFillStyle(i,k,m.value),r:o,globalAlpha:0,cursor:"pointer"}});j.addChild(p),p.iGroup=k,p.iNode=i,p.r=o,n&&(p.zAxis={field:this.zAxis.field,value:n,org:this.zAxis.org}),p.on("panstart mouseover",function(a){a.eventInfo=f._getInfoHandler(a),this.context.globalAlpha=.9,this.context.r++}),p.on("panmove mousemove",function(a){a.eventInfo=f._getInfoHandler(a)}),p.on("panend mouseout",function(a){a.eventInfo={},this.context.globalAlpha=.8,this.context.r--}),p.on("tap click",function(a){a.eventInfo=f._getInfoHandler(a)}),this._circles.push(p)}this.sprite.addChild(j)}this.setX(this.pos.x),this.setY(this.pos.y)}},_getInfoHandler:function(a){var b=a.target,c={iGroup:b.iGroup,iNode:b.iNode,nodesInfoList:this._getNodeInfo(b.iGroup,b.iNode)};return c},_getNodeInfo:function(a,b){var c=[];return c.push(this.data[a][b]),c},grow:function(){function a(){c=requestAnimationFrame(a),d.update()}var b=this,c=null,e=function(){new d.Tween({h:0}).to({h:100},500).onUpdate(function(){for(var a=0,c=b._circles.length;c>a;a++){var d=b._circles[a];d.context.globalAlpha=this.h/100*.8,d.context.r=this.h/100*d.r}}).onComplete(function(){cancelAnimationFrame(c)}).start();a()};e()}},e});