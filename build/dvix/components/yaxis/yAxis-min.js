define("dvix/components/yaxis/yAxis",["canvax/index","canvax/shape/Line","dvix/utils/tools","dvix/utils/datasection"],function(a,b,c,d){var e=function(a,b){this.w=0,this.display="block",this.mode=1,this.dis=6,this.line={enabled:1,width:6,height:3,strokeStyle:"#BEBEBE"},this.text={fillStyle:"blank",fontSize:12},this.data=[],this.dataSection=[],this.dataOrg=[],this.sprite=null,this.txtSp=null,this.lineSp=null,this.x=0,this.y=0,this.disYAxisTopLine=6,this.yMaxHeight=0,this.yGraphsHeight=0,this.init(a,b)};return e.prototype={init:function(b,c){_.deepExtend(this,b),this._initData(c),this.sprite=new a.Display.Sprite},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},draw:function(a){_.deepExtend(this,a),this.yGraphsHeight=this.yMaxHeight-this._getYAxisDisLine(),this.setX(this.pos.x),this.setY(this.pos.y),this._trimYAxis(),this._widget()},_trimYAxis:function(){for(var a=this.dataSection[this.dataSection.length-1],b=[],c=0,d=this.dataSection.length;d>c;c++){var e=-(this.dataSection[c]-this._baseNumber)/(a-this._baseNumber)*this.yGraphsHeight;e=isNaN(e)?0:parseInt(e),b[c]={content:this.dataSection[c],y:e}}this.data=b},_getYAxisDisLine:function(){var a=this.disYAxisTopLine,b=2*a,c=a;return c=a+this.yMaxHeight%this.dataSection.length,c=c>b?b:c},_initData:function(a){var b=_.flatten(a.org);this.dataOrg=a.org,this.dataSection=d.section(b),this._baseNumber=this.dataSection[0],1==b.length&&(this.dataSection[0]=2*b[0],this._baseNumber=0)},_widget:function(){var d=this;if("none"==d.display)return d.w=0,void 0;var e=this.data;if(2==d.mode){var f=[];e.length>2&&(f.push(e[0]),f.push(e[e.length-1]),e=f)}d.txtSp=new a.Display.Sprite,d.sprite.addChild(d.txtSp),d.lineSp=new a.Display.Sprite,d.sprite.addChild(d.lineSp);for(var g=0,h=0,i=e.length;i>h;h++){var j=e[h],k=0,l=j.y,m=c.numAddSymbol(j.content),n=new a.Display.Text(m,{context:{x:k,y:l,fillStyle:d.text.fillStyle,fontSize:d.text.fontSize,textAlign:2==d.mode?"left":"right",textBaseline:"middle"}});if(2==d.mode&&2==e.length){var o=n.getTextHeight();0==h?n.context.y=l-parseInt(o/2)-2:1==h&&(n.context.y=l+parseInt(o/2)+2)}d.txtSp.addChild(n),g=Math.max(g,n.getTextWidth());var p=new b({id:h,context:{x:0,y:l,xEnd:d.line.width,yEnd:0,lineWidth:d.line.height,strokeStyle:d.line.strokeStyle}});d.lineSp.addChild(p)}d.txtSp.context.x=2==d.mode?0:g,d.lineSp.context.x=g+d.dis,d.line.enabled?d.w=g+d.dis+d.line.width:(d.lineSp.context.visible=!1,d.w=g+d.dis)}},e});