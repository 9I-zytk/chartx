define("chartx/chart/hybrid/bar_line",["canvax/index","chartx/chart/bar/index","chartx/chart/line/index","chartx/utils/dataformat","chartx/components/yaxis/yAxis","chartx/chart/line/graphs","chartx/chart/line/tips"],function(a,b,c,d,e,f,g){return b.extend({_yAxisR:null,init:function(a,b,c){this.graphs={fill:{alpha:0}},_.deepExtend(this,c),this.dataFrame=this._initData(b,{yAxis:this.yAxis.bar,xAxis:this.xAxis}),this._lineChart={dataFrame:d(b,{yAxis:this.yAxis.line,xAxis:this.xAxis}),_graphs:null}},draw:function(){this._setStages(),this._initModule(),this._lineChart._graphs=new f(this.graphs,this),this._tip=new g(this.tips,this._lineChart.dataFrame,this.canvax.getDomContainer()),this._yAxisR=new e(_.extend(_.clone(this.yAxis.line),{place:"right"}),this._lineChart.dataFrame.yAxis),this.core.addChild(this._yAxisR.sprite),this._startDraw(),this._drawEnd(),this.core.addChild(this._lineChart._graphs.sprite),this.drawed=!0},_startDraw:function(){var a=this,b=parseInt(a.height-a._xAxis.h);a._yAxis.draw({pos:{x:0,y:b},yMaxHeight:b});var d=a._yAxis.w,e=0;a._yAxisR&&(a._yAxisR.draw({pos:{x:0,y:b},yMaxHeight:a._yAxis.yGraphsHeight}),e=a._yAxisR.w,a._yAxisR.setX(a.width-e)),a._xAxis.draw({graphh:a.height,graphw:a.width-e,yAxisW:d}),a._xAxis.yAxisW!=d&&(a._yAxis.resetWidth(a._xAxis.yAxisW),d=a._xAxis.yAxisW);var f=Math.max(a._yAxis.yGraphsHeight,a._yAxisR.yGraphsHeight),g=a._xAxis.xGraphsWidth;a._back.draw({w:g,h:f,yOrigin:{biaxial:!0},xAxis:{data:a._yAxis.layoutData},yAxis:{data:a._xAxis.layoutData},pos:{x:d,y:b}}),a._graphs.draw(a._trimGraphs(),{w:g,h:f,pos:{x:d,y:b},yDataSectionLen:a._yAxis.dataSection.length}),a._lineChart._graphs.draw({w:g,h:f,data:c.prototype._trimGraphs.apply(a,[a._yAxisR,a._lineChart.dataFrame]),disX:c.prototype._getGraphsDisX.apply(a,[]),smooth:a.smooth}),a._lineChart._graphs.setX(d),a._lineChart._graphs.setY(b),a._lineChart._graphs.grow(),a._lineChart._graphs.sprite.getChildById("induce").context.visible=!1},_getLineTipInfo:function(a){for(var b=a.target.iGroup,c=[],d=this._lineChart._graphs.groups,e=0,f=d.length;f>e;e++){var g=d[e].getNodeInfoAt(b);g&&(g.field=this._lineChart.dataFrame.yAxis.field[g._groupInd],c.push(g))}return a.tipsInfo.nodesInfoList=a.tipsInfo.nodesInfoList.concat(c),{x:this._xAxis.sprite.localToGlobal({x:this._xAxis.layoutData[b].x,y:0}).x,lineH:this._graphs.h,lineTop:this._lineChart._graphs.induce.localToGlobal().y}},bindEvent:function(){var a=this;this.core.on("panstart mouseover",function(b){a._setXaxisYaxisToTipsInfo(b),a._tip.show(b,a._getLineTipInfo(b))}),this.core.on("panstart mousemove",function(b){a._setXaxisYaxisToTipsInfo(b),a._tip.show(b,a._getLineTipInfo(b))}),this.core.on("panstart mouseout",function(b){a._tip.hide(b)})}})});