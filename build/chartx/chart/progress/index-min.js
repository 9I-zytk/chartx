define("chartx/chart/progress/index",["canvax/index","chartx/chart/index","canvax/shape/Sector","canvax/animation/Tween"],function(a,b,c,d){return b.extend({init:function(a,b,c){this.barWidth=10,this.normalColor="#E6E6E6",this.progColor="#8d76c4",this.startAngle=-90,this.endAngle=this.startAngle,this.currRatio=0,this.text={enabled:1,fillStyle:"#666",format:null,fontSize:30},_.deepExtend(this,c),!this.r&&(this.r=Math.min(this.width,this.height)/2),this.tween=null},draw:function(b){if(this.stage.addChild(new c({context:{x:parseInt(this.width/2),y:parseInt(this.height/2),r:this.r,r0:this.r-this.barWidth,startAngle:this.startAngle,endAngle:this.startAngle+360,fillStyle:this.normalColor,lineJoin:"round"}})),this.stage.addChild(new c({id:"speed",context:{x:parseInt(this.width/2),y:parseInt(this.height/2),r:this.r,r0:this.r-this.barWidth,startAngle:this.startAngle,endAngle:this.startAngle,fillStyle:this.progColor,lineJoin:"round"}})),this.text.enabled){var d=this.currRatio+"%";_.isFunction(this.text.format)&&(d=this.text.format(this.currRatio)),this.stage.addChild(new a.Display.Text(d,{id:"ratioText",context:{x:parseInt(this.width/2),y:parseInt(this.height/2),fillStyle:this.text.fillStyle,fontSize:this.text.fontSize,textAlign:"center",textBaseline:"middle"}}))}},_setRatio:function(a){this.stage.getChildById("speed").context.endAngle=a/100*360+this.startAngle},setRatio:function(a){function b(){e=requestAnimationFrame(b),d.update()}var c=this,e=null,f=function(){c.tween=new d.Tween({r:c.currRatio}).to({r:a},1100).easing(d.Easing.Quintic.Out).onUpdate(function(){c._setRatio(this.r),c.currRatio=this.r,c.fire("ratioChange",{currRatio:this.r});var a=parseInt(this.r)+"%";_.isFunction(c.text.format)&&(a=c.text.format(this.r)),c.stage.getChildById("ratioText").resetText(a)}).onComplete(function(){cancelAnimationFrame(e)}).start(),b()};f()}})});