<h2 id="xchart使用方式">xChart使用方式</h2><h3 id="1，在页面引入xchart的库文件">1，在页面引入xChart的库文件</h3><p>daily环境为 <script><a href="http://g-assets.daily.taobao.net/thx/charts/chartx/index.js">http://g-assets.daily.taobao.net/thx/charts/chartx/index.js</a></scirpt></p>
<p>cdn环境为   <script><a href="http://g.tbcdn.cn/thx/charts//chartx/index.js">http://g.tbcdn.cn/thx/charts//chartx/index.js</a></scirpt></p>
<p>当前最新CDN版本号为1.7.1</p>
<h3 id="2，创建图表">2，创建图表</h3><p>在全局图表对象Chartx下面有一个create对象，上面挂载着全部的图表类型
目前有[&#39;bar&#39; , &#39;force&#39; , &#39;line&#39; , &#39;map&#39; , &#39;pie&#39; , &#39;planet&#39; , &#39;progress&#39; , &#39;radar&#39; , &#39;scat&#39; , &#39;tree&#39;]
该类型方法需要三个参数，</p>
<table>
<thead>
<tr>
<th>参数位置</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>el   --&gt; DOM树中对应的节点，可以是id 也可以是kissy.all(&quot;#id&quot;)或者jquery(&quot;#id&quot;)对象</td>
</tr>
<tr>
<td>2</td>
<td>data --&gt; 绘制图表的数据，无数据则传入空数组[]</td>
</tr>
<tr>
<td>3</td>
<td>options --&gt; 绘制图表的配置</td>
</tr>
</tbody>
</table>
<h5 id="创建一个line-chart">创建一个line chart</h5><div class="highlight"><pre><code class="javascript">Chartx.create.line(el , data , options)</code></pre></div><h5 id="如果需要拿到chart的图表实例，来绑定事件之类的，则需要在其promise中操作">如果需要拿到chart的图表实例，来绑定事件之类的，则需要在其promise中操作</h5><div class="highlight"><pre><code class="javascript">Chartx.create.line(el , data , options).then(<span class="function"><span class="keyword">function</span><span class="params">( chart )</span>{</span>
    chart.on(<span class="string">"eventType"</span> , <span class="function"><span class="keyword">function</span><span class="params">(e)</span>{</span>
        <span class="keyword">do</span> something ......
    });
});</code></pre></div><p>TODO：promise then 回调函数的执行在 chart的 绘制之前。。。</p>
<h3 id="3，在magix环境的项目中使用chartx">3，在magix环境的项目中使用chartx</h3><p>在magix的OPOA项目环境中，我们提供magix扩展来在业务中方便的使用chartx。</p>
<p>首先，请在项目的ini.js文件，找到<code>exts</code>配置，加入<code>chartx/magixext</code>。</p>
<p>这个时候我们可以在view中很方便的使用<code>createChart</code>方法来创建图表了。</p>
<div class="highlight"><pre><code class="javascript">view.createChart( chartType , el , data , options ).then(<span class="function"><span class="keyword">function</span><span class="params">(chart)</span>{</span>
    chart.draw()
});</code></pre></div><p>view.createChart 唯一的不一样就是第一个参数为要创建的图表类型，后面三个参数则和上面的图表创建方式一一对应</p>
<p>如果需要拿到chart的图表实例，来绑定事件之类的，则需要在其promise中操作</p>
<div class="highlight"><pre><code class="javascript">view.createChart( chartType , el , data , options).then(<span class="function"><span class="keyword">function</span><span class="params">( chart )</span>{</span>
    chart.on(<span class="string">"eventType"</span> , <span class="function"><span class="keyword">function</span><span class="params">(e)</span>{</span>
        <span class="keyword">do</span> something ......
    });
});</code></pre></div><p>TODO：同上，promise then 回调函数的执行在 chart的 绘制之前。。。</p>
<p>DEMO：</p>
<div class="highlight"><pre><code class="javascript"><span class="keyword">return</span> View.extend({
    init: <span class="function"><span class="keyword">function</span><span class="params">(data)</span> {</span>
    },
    render: <span class="function"><span class="keyword">function</span><span class="params">(e)</span> {</span>
        <span class="keyword">var</span> me = <span class="keyword">this</span>
        me.renderByPagelet({});
        me._createWorldMap();
    },
    _createWorldMap : <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        <span class="keyword">var</span> me = <span class="keyword">this</span>;
        me.createChart(<span class="string">"map"</span> , $(<span class="string">"#worldmap"</span>) , [] , {
            mapType : <span class="string">"world"</span>
        });
    }
});</code></pre></div>