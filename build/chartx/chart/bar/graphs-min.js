define("chartx/chart/bar/graphs",["canvax/index","canvax/shape/Rect","canvax/animation/Tween","chartx/components/tips/tip","chartx/utils/tools"],function(a,b,c,d,e){var f=function(a,b,c,e){this.dataFrame=e,this.w=0,this.h=0,this.pos={x:0,y:0},this._colors=["#42a8d7","#666666","#6f8cb2","#c77029","#f15f60","#ecb44f","#ae833a","#896149","#4d7fff"],this.bar={width:12,radius:2},this.text={enabled:0,fillStyle:"#999999",fontSize:12,textAlign:"left",format:null},this.eventEnabled=!0,this.sprite=null,this.txtsSp=null,this.yDataSectionLen=0,_.deepExtend(this,a),this._tip=new d(b,c),this.init()};return f.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"}),this.txtsSp=new a.Display.Sprite({id:"txtsSp",context:{visible:!1}})},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},_getColor:function(a,b,c,d,e,f,g){var h=null;return _.isString(a)&&(h=a),_.isArray(a)&&(h=_.flatten(a)[c>1?f+d*b%(c*(d+1)):d]),_.isFunction(a)&&(h=a({iGroup:d,iNode:e,iLay:f,value:g})),h&&""!=h||(h=this._colors[c>1?f+d*b%(c*(d+1)):d]),h},checkBarW:function(a){this.bar.width>=a&&(this.bar.width=a-1>1?a-1:1)},draw:function(c,d){if(_.deepExtend(this,d),0!=c.length){this.data=c;var e=this,f=c.length;_.each(c,function(c,d){var g=new a.Display.Sprite({id:"barGroup"+d}),i=c.length;if(0!=i){for(h=0;h<c[0].length;h++){var j=new a.Display.Sprite({id:"spv"+d+"_h_"+h});for(v=0;v<i;v++){var k=c[v][h],l=parseInt(Math.abs(k.y));v>0&&(l-=parseInt(Math.abs(c[v-1][h].y)));var m=e._getColor(e.bar.fillStyle,f,i,d,h,v,k.value),n={x:Math.round(k.x-e.bar.width/2),y:parseInt(k.y),width:parseInt(e.bar.width),height:l,fillStyle:m},o=new b({context:n});j.addChild(o)}g.addChild(j)}e.sprite.addChild(g)}}),this.sprite.context.x=this.pos.x,this.sprite.context.y=this.pos.y}},grow:function(){function a(){d=requestAnimationFrame(a),c.update()}var b=this,d=null,e=function(){new c.Tween({h:0}).to({h:b.h},500).onUpdate(function(){b.sprite.context.scaleY=this.h/b.h}).onComplete(function(){b._growEnd(),cancelAnimationFrame(d)}).start();a()};e()},_growEnd:function(){this.text.enabled&&(this.txtsSp.context.visible=!0)},_setXaxisYaxisToTipsInfo:function(a){a.tipsInfo.xAxis={field:this.dataFrame.xAxis.field,value:this.dataFrame.xAxis.org[0][a.tipsInfo.iNode]};var b=this;_.each(a.tipsInfo.nodesInfoList,function(a,c){a.field=b.dataFrame.yAxis.field[c]})},_setTipsInfoHandler:function(a,b,c){return a.tipsInfo={iGroup:c,iNode:b,nodesInfoList:this._getNodeInfo(b)},this._setXaxisYaxisToTipsInfo(a),a},_getNodeInfo:function(a){var b=[],c=this;return _.each(this.data,function(d,e){var f=_.clone(d[a]);f.fillStyle=c._getColor(c.bar.fillStyle,a,e,f.value),b.push(f)}),b}},f});