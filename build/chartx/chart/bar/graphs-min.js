define("chartx/chart/bar/graphs",["canvax/index","canvax/shape/Rect","canvax/animation/Tween","chartx/components/tips/tip"],function(a,b,c,d){var e=function(a,b,c){this.w=0,this.h=0,this.pos={x:0,y:0},this._colors=["#6f8cb2","#c77029","#f15f60","#ecb44f","#ae833a","#896149"],this.bar={width:12},this.eventEnabled=!0,this.sprite=null,this.yDataSectionLen=0,_.deepExtend(this,a),this._tip=new d(b,c),this.init()};return e.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"})},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},getBarFillStyle:function(a,b,c){var d=null;return _.isArray(this.bar.fillStyle)&&(d=this.bar.fillStyle[b]),_.isFunction(this.bar.fillStyle)&&(d=this.bar.fillStyle(a,b,c)),d&&""!=d||(d=this._colors[b]),d},checkBarW:function(a){this.bar.width>=a&&(this.bar.width=a-1>1?a-1:1)},draw:function(c,d){if(_.deepExtend(this,d),0!=c.length){this.data=c;for(var e=c[0].length,f=0;e>f;f++){for(var g=new a.Display.Sprite({id:"barGroup"+f}),h=new a.Display.Sprite({id:"barGroupHover"+f}),i=0,j=c.length;j>i;i++){var k=c[i][f],l=this.getBarFillStyle(f,i,k.value),m=parseInt(Math.abs(k.y)),n=Math.min(this.bar.width/2,m),o=new b({id:"bar_"+i+"_"+f,context:{x:Math.round(k.x-this.bar.width/2),y:parseInt(k.y),width:parseInt(this.bar.width),height:m,fillStyle:l,radius:[n,n,0,0]}}),p=this.h/(this.yDataSectionLen-1),q=Math.ceil(m/p)*p,r=new b({id:"bar_"+i+"_"+f+"hover",context:{x:Math.round(k.x-this.bar.width/2),y:-q,width:parseInt(this.bar.width),height:q,fillStyle:"black",globalAlpha:0,cursor:"pointer"}});if(r.target=o,r.row=f,r.column=i,this.eventEnabled){var s=this;r.on("mouseover",function(a){var b=this.target.context;b.x--,b.width+=2,s.sprite.addChild(s._tip.sprite),s._tip.show(s._setTipInfoHandler(a,this.row,this.column))}),r.on("mousemove",function(a){s._tip.move(s._setTipInfoHandler(a,this.row,this.column))}),r.on("mouseout",function(a){var b=this.target.context;b.x++,b.width-=2,s._tip.hide(a),s.sprite.removeChild(s._tip.sprite)})}g.addChild(o),h.addChild(r)}this.sprite.addChild(g),this.sprite.addChild(h)}this.sprite.context.x=this.pos.x,this.sprite.context.y=this.pos.y}},grow:function(){function a(){d=requestAnimationFrame(a),c.update()}var b=this,d=null,e=function(){new c.Tween({h:0}).to({h:b.h},500).onUpdate(function(){b.sprite.context.scaleY=this.h/b.h}).onComplete(function(){cancelAnimationFrame(d)}).start();a()};e()},_setTipInfoHandler:function(a,b,c){return a.tipsInfo={iGroup:c,iNode:b,nodesInfoList:this._getNodeInfo(b)},a},_getNodeInfo:function(a){var b=[],c=this;return _.each(this.data,function(d,e){var f=_.clone(d[a]);f.fillStyle=c.getBarFillStyle(a,e,f.value),b.push(f)}),b}},e});