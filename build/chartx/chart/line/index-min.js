define("chartx/chart/line/tips",["canvax/index","canvax/shape/Line","canvax/shape/Circle","chartx/components/tips/tip"],function(a,b,c,d){var e=function(a,b,c){this.line={enabled:1},this.sprite=null,this._line=null,this._nodes=null,this._tip=null,this._isShow=!1,this.enabled=!0,this.init(a,b,c)};return e.prototype={init:function(b,c,e){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"tips"}),b=_.deepExtend({prefix:c.yAxis.field},b),this._tip=new d(b,e)},show:function(a){var b=this._getTipsPoint(a);this._initLine(a,b),this._initNodes(a,b),this.sprite.addChild(this._tip.sprite),this._tip.show(a),this._isShow=!0},move:function(a){this._resetStatus(a),this._tip.move(a)},hide:function(a){this.sprite.removeAllChildren(),this._line=null,this._nodes=null,this._tip.hide(a),this._isShow=!1},_getTipsPoint:function(a){return a.target.localToGlobal(a.tipsInfo.nodesInfoList[a.tipsInfo.iGroup])},_resetStatus:function(a){var b=this._getTipsPoint(a);this._line&&(this._line.context.x=parseInt(b.x)),this._resetNodesStatus(a,b)},_initLine:function(a,c){var d=_.deepExtend({x:parseInt(c.x),y:a.target.localToGlobal().y,xStart:0,yStart:a.target.context.height,xEnd:0,yEnd:0,lineWidth:1,strokeStyle:"#cccccc"},this.line);this.line.enabled&&(this._line=new b({id:"tipsLine",context:d}),this.sprite.addChild(this._line))},_initNodes:function(b,d){this._nodes=new a.Display.Sprite({id:"line-tipsNodes",context:{x:parseInt(d.x),y:b.target.localToGlobal().y}});var e=this;_.each(b.tipsInfo.nodesInfoList,function(d){var f=new a.Display.Sprite({context:{y:b.target.context.height-Math.abs(d.y)}});f.addChild(new c({context:{r:d.r+2+2,fillStyle:"white",strokeStyle:d.strokeStyle,lineWidth:d.lineWidth}})),f.addChild(new c({context:{r:d.r+1,fillStyle:d.strokeStyle}})),e._nodes.addChild(f)}),this.sprite.addChild(this._nodes)},_resetNodesStatus:function(a,b){var c=this;this._nodes.children.length!=a.tipsInfo.nodesInfoList.length&&(this._nodes.removeAllChildren(),this._initNodes(a,b)),this._nodes.context.x=parseInt(b.x),_.each(a.tipsInfo.nodesInfoList,function(b,d){var e=c._nodes.getChildAt(d).context;e.y=a.target.context.height-Math.abs(b.y)})}},e}),define("chartx/chart/line/xaxis",["chartx/components/xaxis/xAxis"],function(a){var b=function(a,c){b.superclass.constructor.apply(this,arguments)};return Chartx.extend(b,a,{_trimXAxis:function(a,b){var c=a.length,d=[];if(1==c)d.push({content:a[0],x:parseInt(b/2)});else for(var e=0,f=a.length;f>e;e++){var g={content:a[e],x:parseInt(e/(c-1)*b)};d.push(g)}return d}}),b}),define("chartx/chart/line/index",["chartx/chart/index","chartx/utils/tools","chartx/utils/datasection","./xaxis","chartx/components/yaxis/yAxis","chartx/components/back/Back","chartx/components/anchor/Anchor","chartx/chart/line/graphs","./tips","chartx/utils/dataformat"],function(a,b,c,d,e,f,g,h,i,j){var k=a.Canvax;return a.extend({init:function(a,b,c){this.event={enabled:0,This:this,on:null},this._xAxis=null,this._yAxis=null,this._anchor=null,this._back=null,this._graphs=null,this._tips=null,_.deepExtend(this,c),this.dataFrame=this._initData(b,this)},draw:function(){this.stageTip=new k.Display.Sprite({id:"tip"}),this.core=new k.Display.Sprite({id:"core"}),this.stageBg=new k.Display.Sprite({id:"bg"}),this.stage.addChild(this.stageBg),this.stage.addChild(this.core),this.stage.addChild(this.stageTip),this.rotate&&this._rotate(this.rotate),this._initModule(),this._startDraw(),this._arguments=arguments},add:function(a,b){if(!(_.indexOf(this.yAxis.field,a)>=0)){var c=this.yAxis.field.length;void 0!=b&&null!=b&&(c=b),void 0==b?(this.yAxis.field.push(a),b=this.yAxis.field.length-1):this.yAxis.field.splice(b,0,a),this.dataFrame=this._initData(this.dataFrame.org,this),this._yAxis.update(this.yAxis,this.dataFrame.yAxis),this._back.update({xAxis:{data:this._yAxis.layoutData}}),this._graphs.add({data:this._trimGraphs()},b)}},remove:function(a){var b=null;b=_.isNumber(a)?a:_.indexOf(this.yAxis.field,a),null!=b&&void 0!=b&&-1!=b&&this._remove(b)},_remove:function(a){this.dataFrame.yAxis.field.splice(a,1),this.dataFrame.yAxis.org.splice(a,1),this._yAxis.update(this.yAxis,this.dataFrame.yAxis),this._back.update({xAxis:{data:this._yAxis.layoutData}}),this._graphs.remove(a),this._graphs.update({data:this._trimGraphs()})},_initData:j,_initModule:function(){this._xAxis=new d(this.xAxis,this.dataFrame.xAxis),this._yAxis=new e(this.yAxis,this.dataFrame.yAxis),this._back=new f(this.back),this._anchor=new g(this.anchor),this._graphs=new h(this.graphs,this),this._tips=new i(this.tips,this.dataFrame,this.canvax.getDomContainer()),this.stageBg.addChild(this._back.sprite),this.stageBg.addChild(this._anchor.sprite),this.core.addChild(this._xAxis.sprite),this.core.addChild(this._yAxis.sprite),this.core.addChild(this._graphs.sprite),this.stageTip.addChild(this._tips.sprite)},_startDraw:function(){var a=this.height-this._xAxis.h;this._yAxis.draw({pos:{x:0,y:a},yMaxHeight:a});var b=this._yAxis.w;this._xAxis.draw({graphh:this.height,graphw:this.width,yAxisW:b}),this._xAxis.yAxisW!=b&&(this._yAxis.resetWidth(this._xAxis.yAxisW),b=this._xAxis.yAxisW);var c=this._yAxis.yGraphsHeight;this._back.draw({w:this._xAxis.w,h:c,xAxis:{data:this._yAxis.layoutData},yAxis:{data:this._xAxis.layoutData},pos:{x:b,y:a}}),this._graphs.draw({w:this._xAxis.xGraphsWidth,h:this._yAxis.yGraphsHeight,data:this._trimGraphs(),disX:this._getGraphsDisX(),smooth:this.smooth}),this._graphs.setX(b),this._graphs.setY(a),this._graphs.grow();var d=this;if(this._graphs.sprite.on("panstart mouseover",function(a){d._tips.enabled&&a.tipsInfo.nodesInfoList.length>0&&(d._setXaxisYaxisToTipsInfo(a),d._tips.show(a))}),this._graphs.sprite.on("panmove mousemove",function(a){d._tips.enabled&&(a.tipsInfo.nodesInfoList.length>0?(d._setXaxisYaxisToTipsInfo(a),d._tips._isShow?d._tips.move(a):d._tips.show(a)):d._tips._isShow&&d._tips.hide(a))}),this._graphs.sprite.on("panend mouseout",function(a){d._tips.enabled&&d._tips.hide(a)}),this._anchor.enabled){var e=this._getPosAtGraphs(this._anchor.xIndex,this._anchor.num);this._anchor.draw({w:this.width-b,h:c,cross:{x:e.x,y:c+e.y},pos:{x:b,y:a-c}})}},_setXaxisYaxisToTipsInfo:function(a){a.tipsInfo.xAxis={field:this.dataFrame.xAxis.field,value:this.dataFrame.xAxis.org[0][a.tipsInfo.iNode]};var b=this;_.each(a.tipsInfo.nodesInfoList,function(a,c){a.field=b.dataFrame.yAxis.field[a._groupInd]})},_trimGraphs:function(){for(var a=this._yAxis.dataSection[this._yAxis.dataSection.length-1],b=this.dataFrame.yAxis.org,c=[],d=0,e=b.length;e>d;d++)for(var f=0,g=b[d].length;g>f&&(c[d]?"":c[d]=[],!(f>=this._xAxis.data.length));f++){var h=this._xAxis.data[f].x,i=-(b[d][f]-this._yAxis._bottomNumber)/(a-this._yAxis._bottomNumber)*this._yAxis.yGraphsHeight;i=isNaN(i)?0:i,c[d][f]={value:b[d][f],x:h,y:i}}return c},_getPosAtGraphs:function(a,b){var c=this._xAxis.data[a].x,d=this._graphs.data[0][a].y;return{x:c,y:d}},_getGraphsDisX:function(){var a=this._xAxis.dataSection.length,b=this._xAxis.xGraphsWidth/(a-1);return 1==a&&(b=0),b},_click:function(a){var b=this.This;_.isFunction(b.on)&&b.on(a)}})});