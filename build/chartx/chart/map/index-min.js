define("chartx/chart/map/index",["chartx/chart/index","canvax/shape/Path","chartx/chart/map/mapdata","./tips","chartx/utils/dataformat"],function(a,b,c,d,e){return a.extend({init:function(a,b,c){this.tips={},this.normalColor="#c9bbe6",this.area={normal:{strokeStyle:"white",fillStyle:this.normalColor,lineWidth:3},hover:{strokeStyle:"#9378ce",fillStyle:this.normalColor,lineWidth:3}},this.areaField="area",this.tips={field:[]},_.deepExtend(this,c),this._dataFrame=e(b,{xAxis:{field:[this.areaField]},yAxis:{field:this.tips.field}}),this.tips.field=this._dataFrame.yAxis.field,this._mapScale=Math.min(this.width/560,this.height/470)},draw:function(){this._initModule(),this._widget()},_getDataForArea:function(a){var b=null,c=this;return _.each(this._dataFrame.xAxis.org[0],function(d,e){d.indexOf(a.index)>=0&&(b=c._dataFrame.org[e+1])}),b},_getColor:function(a,b){var c=a;return _.isFunction(a)&&(c=a(this._getDataForArea(b))),c&&""!=c||(c=this.normalColor),c},_widget:function(){var a=this,d=c.get();_.each(d,function(c){var d=new b({context:{x:0,y:0,scaleX:a._mapScale,scaleY:a._mapScale,path:c.d,lineWidth:a.area.normal.lineWidth,fillStyle:a._getColor(a.area.normal.fillStyle,c),strokeStyle:a._getColor(a.area.normal.strokeStyle,c)}});d.mapData=c,d.on("mouseover hold",function(b){this.context.strokeStyle=a._getColor(a.area.hover.strokeStyle,this.mapData),this.context.fillStyle=a._getColor(a.area.hover.fillStyle,this.mapData),this.context.lineWidth=a.area.hover.lineWidth,a._tips.show(a._setTipsInfoHand(b,this.mapData))}),d.on("mouseout release",function(b){this.context.strokeStyle=a._getColor(a.area.normal.strokeStyle,this.mapData),this.context.fillStyle=a._getColor(a.area.normal.fillStyle,this.mapData),this.context.lineWidth=a.area.normal.lineWidth,a._tips.hide(b)}),a.stage.addChild(d)})},_initModule:function(){this.tips.cPointStyle=this.area.hover.strokeStyle,this.tips._mapScale=this._mapScale,this._tips=new d(this.tips,{},this.canvax.getDomContainer()),this.canvax.getHoverStage().addChild(this._tips.sprite)},_setTipsInfoHand:function(a,b){var c={area:{field:this.areaField,value:b.index},nodesInfoList:[]},d=this,e=this._getDataForArea(b);return e&&_.each(this.tips.field,function(a){c.nodesInfoList.push({field:a,value:e[_.indexOf(d._dataFrame.org[0],a)]})}),a.tipsInfo=c,a}})});