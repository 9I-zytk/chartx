KISSY.add("dvix/chart/line/tips",function(a,b,c,d,e){var f=function(a,b,c){this.sprite=null,this._line=null,this._nodes=null,this._tip=null,this.init(a,b,c)};return f.prototype={init:function(a,c,d){_.deepExtend(this,a),this.sprite=new b.Display.Sprite({id:"tips"}),a=_.deepExtend({prefix:c.yAxis.field},a),this._tip=new e(a,d)},show:function(a){var b=this._getTipsPoint(a);this._initLine(a,b),this._initNodes(a,b),this.sprite.addChild(this._tip.sprite),this._tip.show(a)},move:function(a){this._resetPosition(a),this._tip.move(a)},hide:function(a){this.sprite.removeAllChildren(),this._line=null,this._nodes=null,this._tip.hide(a)},_getTipsPoint:function(a){return a.target.localToGlobal(a.info.nodesInfoList[a.info.iGroup])},_resetPosition:function(a){var b=this._getTipsPoint(a);this._line.context.x=b.x,this._resetNodesPosition(a,b)},_initLine:function(a,b){var d=_.deepExtend({x:b.x,y:a.target.localToGlobal().y,xStart:0,yStart:a.target.context.height,xEnd:0,yEnd:0,lineType:"dashed",lineWidth:1,strokeStyle:"#333333"},this.line);this._line=new c({id:"tipsLine",context:d}),this.sprite.addChild(this._line)},_initNodes:function(a,c){this._nodes=new b.Display.Sprite({id:"tipsNodes",context:{x:c.x,y:a.target.localToGlobal().y}});var e=this;_.each(a.info.nodesInfoList,function(b){e._nodes.addChild(new d({context:{y:a.target.context.height-Math.abs(b.y),r:3,fillStyle:b.fillStyle,strokeStyle:"#ffffff",lineWidth:3}}))}),this.sprite.addChild(this._nodes)},_resetNodesPosition:function(a,b){var c=this;this._nodes.context.x=b.x,_.each(a.info.nodesInfoList,function(b,d){c._nodes.getChildAt(d).context.y=a.target.context.height-Math.abs(b.y)})}},f},{requires:["canvax/","canvax/shape/Line","canvax/shape/Circle","dvix/components/tips/tip","dvix/utils/deep-extend"]});